<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Key Differences | @box2d</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="A full-blown ecosystem for box2d for the JavaScript/TypeScript world">
    
    <link rel="preload" href="/box2d.ts/docs/assets/css/0.styles.c947eaec.css" as="style"><link rel="preload" href="/box2d.ts/docs/assets/js/app.8b62823e.js" as="script"><link rel="preload" href="/box2d.ts/docs/assets/js/2.839776af.js" as="script"><link rel="preload" href="/box2d.ts/docs/assets/js/11.4147e1ae.js" as="script"><link rel="prefetch" href="/box2d.ts/docs/assets/js/10.2f19a094.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/12.89bf6c9f.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/13.70d6a5fa.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/14.abe02c4f.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/15.03f8c396.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/16.9aabb626.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/17.77535280.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/18.3c2eef3a.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/3.30ad30be.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/4.8856ccf2.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/5.4ce1f67d.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/6.12f8bd92.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/7.0f78cd35.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/8.8c83ed82.js"><link rel="prefetch" href="/box2d.ts/docs/assets/js/9.09c23b06.js">
    <link rel="stylesheet" href="/box2d.ts/docs/assets/css/0.styles.c947eaec.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/box2d.ts/docs/" class="home-link router-link-active"><!----> <span class="site-name">@box2d</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/box2d.ts/docs/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://lusito.github.io/box2d.ts/benchmark/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmarks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lusito.github.io/box2d.ts/testbed/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lusito/box2d.ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/box2d.ts/docs/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="https://lusito.github.io/box2d.ts/benchmark/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Benchmarks
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lusito.github.io/box2d.ts/testbed/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demos
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/lusito/box2d.ts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Getting Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Box2D</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/box2d.ts/docs/guide/core/" aria-current="page" class="sidebar-link">The Core Library</a></li><li><a href="/box2d.ts/docs/guide/core/key-differences.html" aria-current="page" class="active sidebar-link">Key Differences</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Lights</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Particles</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Controllers</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="key-differences"><a href="#key-differences" class="header-anchor">#</a> Key Differences</h1> <p>The TypeScript API differs in a few points from the original C++ API.</p> <p>Luckily, TypeScript will help you with the API as you use it, so you should be able to spot the changes quickly.</p> <p>Nevertheless, make sure you read the following points to understand how to handle use this library correctly:</p> <h2 id="no-class-instances-on-the-stack"><a href="#no-class-instances-on-the-stack" class="header-anchor">#</a> No Class Instances on the Stack</h2> <p>This one is obvious for anyone who worked with JS before:</p> <p>You can't create class instances on the stack. This means, that you'll need to explicitly create them with new:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// b2PolygonShape groundBox;</span>
<span class="token keyword">const</span> groundBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">b2PolygonShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="garbage-collector-considerations"><a href="#garbage-collector-considerations" class="header-anchor">#</a> Garbage Collector Considerations</h2> <p>Since we can't have class instances on the stack, we need to make sure we don't spam the garbage collector with lots &amp; lots of new objects on every iteration.</p> <p>The usual approach is to have temporary objects, which you can reuse.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Bad:</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>xx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> xy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> yx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> yy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span>yx<span class="token punctuation">,</span> yy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
    <span class="token keyword">return</span> b2Vec2<span class="token punctuation">.</span><span class="token function">Clone</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Better:</span>
<span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">doStuffRight</span><span class="token punctuation">(</span>xx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> xy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> yx<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> yy<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> out<span class="token operator">:</span> b2Vec2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    b<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>yx<span class="token punctuation">,</span> yy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
    <span class="token keyword">return</span> out<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="operators"><a href="#operators" class="header-anchor">#</a> Operators</h2> <p>In C++ you can use operators (+, -, etc.) on classes. There is no equivalent in TypeScript (or JavaScript). Instead, you'll find methods, which we tried to name as best as possible:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token punctuation">{</span>
    sum<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>a<span class="token operator">:</span> b2Vec2<span class="token punctuation">,</span> b<span class="token operator">:</span> b2Vec2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// b2Vec2 sum = a + b;</span>
    <span class="token keyword">const</span> sum <span class="token operator">=</span> sum<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Be sure to check out all methods and static methods of the classes you are interested in to see all possibilities.</p> <h2 id="overloads"><a href="#overloads" class="header-anchor">#</a> Overloads</h2> <p>JavaScript has no overloads and while TypeScript supports overload method definitions, we'd have to check the parameters in runtime to make this work (not good for performance). That's why we try to avoid them and supply alternatively named functions instead:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> temp <span class="token operator">=</span> <span class="token punctuation">{</span>
    sum<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">b2Vec2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">doStuff</span><span class="token punctuation">(</span>a<span class="token operator">:</span> b2Vec2<span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// b2Vec2 sum = a + b2Vec2(x, y);</span>
    <span class="token keyword">const</span> sum <span class="token operator">=</span> sum<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addXY</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Notice how <code>add(v)</code> accepts one parameter of type <code>b2Vec2</code>, while <code>addXY(x, y)</code> accepts two parameters of type <code>number</code>.</p> <h2 id="factory-functions-vs-constructors"><a href="#factory-functions-vs-constructors" class="header-anchor">#</a> Factory Functions vs Constructors</h2> <p>In order to be able to split the extension packages from the core package, we needed to intercept the constructor call of certain classes. Since this is (to my knowledge) not possible in JavaScript, I've introduced factory functions for these cases. In these cases, you'll find that the constructor is private and you can't create an instance. In this case, look for a static <code>Create</code> method:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// b2World world(gravity);</span>
<span class="token keyword">const</span> world <span class="token operator">=</span> b2World<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>gravity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/box2d.ts/docs/guide/core/" class="prev router-link-active">
        The Core Library
      </a></span> <span class="next"><a href="/box2d.ts/docs/guide/lights/">
        Lights
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/box2d.ts/docs/assets/js/app.8b62823e.js" defer></script><script src="/box2d.ts/docs/assets/js/2.839776af.js" defer></script><script src="/box2d.ts/docs/assets/js/11.4147e1ae.js" defer></script>
  </body>
</html>
